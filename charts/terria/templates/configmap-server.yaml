apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ printf "%s-%s" .Release.Name "terriamap-config-server" | trunc 63 | trimSuffix "-" | quote }}
  labels:
    {{- include "terria.labels" . | nindent 4 }}
data:
  serverconfig.json: |-
      {
        "port": {{ .Values.service.port }},
        "allowProxyFor": [{{ .Values.serverConfig.geoserverBaseUrl | quote }}],
        "blacklistedAddresses": [],
        "proxyAuth": {
          {{ .Values.serverConfig.geoserverBaseUrl | quote }}: {
              "authorization": "Basic {{ .Values.serverConfig.geoserverCredentials | b64enc }}"
          }
        }
      }
